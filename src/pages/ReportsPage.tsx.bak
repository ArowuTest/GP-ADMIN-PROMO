// src/pages/ReportsPage.tsx
import React, { useState } from 'react';
import { Tabs } from 'antd';
import { TrophyOutlined, BarChartOutlined } from '@ant-design/icons';
import WinnersReportComponent from '../components/Reports/WinnersReportComponent';
import ParticipantStatsComponent from '../components/ParticipantManagement/ParticipantStatsComponent';
import { usePermission } from '../hooks/usePermission';
import './ReportsPage.css';

const { TabPane } = Tabs;

/**
 * Reports Page Component
 */
const ReportsPage: React.FC = () => {
  const [activeTab, setActiveTab] = useState<string>('winners');
  const { canViewWinnersReport, canViewAllReports } = usePermission();
  
  // Handle tab change
  const handleTabChange = (key: string) => {
    setActiveTab(key);
  };
  
  return (
    <div className="reports-page">
      <Tabs activeKey={activeTab} onChange={handleTabChange} className="reports-tabs">
        {canViewWinnersReport() && (
          <TabPane 
            tab={
              <span>
                <TrophyOutlined />
                Winners Report
              </span>
            } 
            key="winners"
          >
            <WinnersReportComponent />
          </TabPane>
        )}
        {canViewAllReports() && (
          <TabPane 
            tab={
              <span>
                <BarChartOutlined />
                Participant Statistics
              </span>
            } 
            key="stats"
          >
            <ParticipantStatsComponent />
          </TabPane>
        )}
      </Tabs>
    </div>
  );
};

export default ReportsPage;
